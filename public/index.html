
<!DOCTYPE html>
<head>
    <style>
        .caps {
            height: 150px;
            width: 150px;
            float: left;
            border: 2px solid #666666;
            background-color: #ccc;
        }
    </style>

</head>
<body>
<div id="starts">
    <div class="caps"><img src="assets/pic1.jpg" width="80" height="80"></div>
    <div class="caps"><header>B</header><div class="count" data-cap-moves="0"></div></div>
    <div class="caps"><header>C</header><div class="count" data-cap-moves="0"></div></div>
    <div class="caps"><header>D</header><div class="count" data-cap-moves="0"></div></div>
</div>
<div id="starts">
    <div class="caps"></div>
    <div class="caps"></div>
    <div class="caps"></div>
    <div class="caps"></div>
</div>
<script>
(function() {
    var id_ = 'starts';
    var caps_ = document.querySelectorAll('#' + id_ + ' .caps');
    var dragSrcEl_ = null;

    this.handleDragStart = function(e) {
        e.dataTransfer.setData('text/html', this.innerHTML);

        dragSrcEl_ = this;
    };

    this.handleDragOver = function(e) {
        if (e.preventDefault) {
            e.preventDefault(); // Allows us to drop.
        }


        return false;
    };

    this.handleDrop = function(e) {
        // this/e.target is current target element.

        if (e.stopPropagation) {
            e.stopPropagation(); // stops the browser from redirecting.
        }
        // Don't do anything if we're dropping on the same caps we're dragging.
        if (dragSrcEl_ != this && dragSrcEl_.innerHTML != "") {
            dragSrcEl_.innerHTML = this.innerHTML;
            this.innerHTML = e.dataTransfer.getData('text/html');

            // Set number of times the caps has been moved.
            var count = this.querySelector('.count');
            var newCount = parseInt(count.getAttribute('data-cap-moves')) + 1;
            count.setAttribute('data-cap-moves', newCount);
            count.textContent = 'moves: ' + newCount;
        }

        return false;
    };


    [].forEach.call(caps_, function (cap) {
        cap.setAttribute('draggable', 'true');  // Enable capss to be draggable.
        cap.addEventListener('dragstart', this.handleDragStart, false);
        cap.addEventListener('dragenter', this.handleDragEnter, false);
        cap.addEventListener('dragover', this.handleDragOver, false);
        cap.addEventListener('dragleave', this.handleDragLeave, false);
        cap.addEventListener('drop', this.handleDrop, false);
        cap.addEventListener('dragend', this.handleDragEnd, false);
    });
})();
</script>
</body>
</html>
